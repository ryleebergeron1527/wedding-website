<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Petit+Formal+Script&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
  <title>Maddie & Tyler</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #gate {
      min-height: 100svh; display:flex; align-items:center; justify-content:center;
      background:#f6f6f8; padding: 2rem;
    }
    .gate-card {
      width:min(92vw,420px); background:#fff; padding:1.25rem 1.5rem;
      border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.08);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .gate-card h1 { margin:.25rem 0 .5rem; font-size:1.25rem; }
    .gate-card p { margin:0 0 .75rem; color:#555; }
    .gate-card label { font-size:.9rem; color:#333; }
    .gate-card input[type="password"] {
      width:100%; padding:.75rem; margin:.4rem 0 1rem; border:1px solid #ddd; border-radius:10px;
    }
    .gate-card button { width:100%; padding:.75rem; border:0; border-radius:10px; cursor:pointer; background:#111; color:#fff; }
    .gate-err { color:#b00020; font-size:.9rem; min-height:1.25em; }
    main[hidden] { display:none !important; }
    nav[hidden], header[hidden], footer[hidden] { display:none !important; }
  </style>
</head>
<body>
  <section id="gate" role="dialog" aria-modal="true">
    <div class="gate-card">
      <h1>Enter Password</h1>
      <p>This site is for invited guests.</p>
      <form id="pwForm">
        <label for="pw">Password</label>
        <input id="pw" name="pw" type="password" autocomplete="current-password" required />
        <div class="gate-err" id="err" aria-live="polite"></div>
        <button type="submit">Unlock</button>
      </form>
    </div>
  </section>

  <nav class="navbar" hidden>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="gallery.html">Gallery</a></li>
      <li><a href="wedding-party.html">Wedding Party</a></li>
      <li><a href="faq.html">Q & A</a></li>
      <li><a href="travel.html">Travel</a></li>
      <li><a href="things-to-do.html">Things to Do</a></li>
      <li><a href="registry.html">Registry</a></li>
      <li><a href="rsvp.html">RSVP</a></li>
    </ul>
  </nav>

  <header class="hero-banner" hidden>
    <img src="images/banner-pic.jpg" alt="Maddie and Tyler Banner" />
  </header>

  <main hidden>
    <div class="wedding-crest">
      <img src="images/crest.png" alt="crest"/>
    </div>
    <div>
      <h1 class="title-font">Maddie and Tyler</h1>
    </div>
    <section>
      <p class="home-title">Ceremony</p>
      <p>Saturday, May 23, 2026</p>
      <p>4:00 PM</p>
      <p>Linehan Chapel, Nazareth University<p>
      <p>1425 East Avenue, Rochester, NY 14618</p>
    </section>

    <section>
      <p class="home-title">Reception</p>
      <p>Saturday, May 23, 2026</p>
      <p>Immediately following church ceremony</p>
      <p>Oak Hill Country Club</p>
      <p>245 Kilbourn Road, Rochester, NY 14618</p>
    </section>
  </main>

  <footer hidden>
    <p>Â© 2025 Rylee Bergeron</p>
  </footer>

  <script>
    const TOKEN_KEY = "site_unlocked_v1";
    const PASSWORD_HASH_HEX = "c4249c08017aa7d6cc5a2c520b5170c8b24f5d440fbbe39571bc81ea01b12f94";

    const gate = document.getElementById("gate");
    const nav = document.querySelector("nav");
    const header = document.querySelector("header");
    const main = document.querySelector("main");
    const footer = document.querySelector("footer");

    function showContent() {
      gate.style.display = "none";
      if (nav) nav.hidden = false;
      if (header) header.hidden = false;
      if (main) main.hidden = false;
      if (footer) footer.hidden = false;
    }

    // Already unlocked in this tab
    if (sessionStorage.getItem(TOKEN_KEY) === "1") {
      showContent();
    } else {
      // Focus the field
      const pwInput = document.getElementById("pw");
      if (pwInput) pwInput.focus();
    }

    async function sha256Hex(text) {
      const data = new TextEncoder().encode(text);
      const hash = await crypto.subtle.digest("SHA-256", data);
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2,"0")).join("");
    }

    document.getElementById("pwForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const pw = document.getElementById("pw").value;
      const err = document.getElementById("err");
      err.textContent = "";
      try {
        const entered = await sha256Hex(pw);
        if (entered === PASSWORD_HASH_HEX) {
          sessionStorage.setItem(TOKEN_KEY, "1");
          showContent();
        } else {
          err.textContent = "Incorrect password. Try again.";
        }
      } catch {
        err.textContent = "Browser crypto not supported.";
      }
    });
  </script>
</body>
</html>
